if ((typeof(basis$0Path$1)) == "undefined") {basis$0Path$1 = {};
};
(function(){basis$0Path$1.en$Path$50 = new String("Path");
basis$0Path$1.exn$Path$50 = [basis$0Path$1.en$Path$50];
basis$0Path$1.en$InvalidArc$51 = new String("InvalidArc");
basis$0Path$1.exn$InvalidArc$51 = [basis$0Path$1.en$InvalidArc$51];
basis$0Path$1.parentArc$89 = "..";
basis$0Path$1.currentArc$90 = ".";
basis$0Path$1.isAbsolute$91 = function(p$94){return (((p$94.length >= 1)?((basis$0String$1.sub$97(p$94,0)) == 47):false)?[true,"",basis$0String$1.extract$112(p$94,1,[1])]:[false,"",p$94])[0];
};
basis$0Path$1.isRelative$99 = function(p$102){return (((p$102.length >= 1)?((basis$0String$1.sub$97(p$102,0)) == 47):false)?[true,"",basis$0String$1.extract$112(p$102,1,[1])]:[false,"",p$102])[0]?false:true;
};
basis$0Path$1.fromString$103 = function(p$106){var v$115 = ((p$106.length >= 1)?((basis$0String$1.sub$97(p$106,0)) == 47):false)?[true,"",basis$0String$1.extract$112(p$106,1,[1])]:[false,"",p$106];
if (v$115[0]) {var v$675 = v$115[0];
var v$676 = v$115[1];
var v$677 = v$115[2];
return [basis$0String$1.fields$227(function(c$678){return c$678 == 47;
},v$677),v$675,v$676];
} else {switch (v$115[2]) { case "": {return [null,false,v$115[1]];
 break; }default: {var v$670 = v$115[0];
var v$671 = v$115[1];
var v$672 = v$115[2];
return [basis$0String$1.fields$227(function(c$673){return c$673 == 47;
},v$672),v$670,v$671];
} };
};
};
basis$0Path$1.isRoot$129 = function(p$132){var v$137 = ((p$132.length >= 1)?((basis$0String$1.sub$97(p$132,0)) == 47):false)?[true,"",basis$0String$1.extract$112(p$132,1,[1])]:[false,"",p$132];
if (v$137[0]) {switch (v$137[2]) { case "": {return true;
 break; }default: {return false;
} };
} else {return false;
};
};
basis$0Path$1.getVolume$141 = function(p$144){return (((p$144.length >= 1)?((basis$0String$1.sub$97(p$144,0)) == 47):false)?[true,"",basis$0String$1.extract$112(p$144,1,[1])]:[false,"",p$144])[1];
};
basis$0Path$1.validVolume$149 = function(v$892,v$893){return v$893 == "";
};
basis$0Path$1.toString$156 = function(v$213,v$211,v$212){var fix$905 = {};
fix$905.$h = function(v$166,v$169){lab$h: while (true) {if (v$166 == null) {return v$169;
} else {var v$180 = v$166;
var v$181 = v$180[0];
var v$182 = v$180[1];
var t$906 = v$182;
var t$907 = [v$181,["/",v$169]];
var v$166 = t$906;
var v$169 = t$907;
continue lab$h;
};
};
};
var h$163 = fix$905.$h;
if (v$212 == "") {if (v$211) {if (v$213 == null) {return v$212 + "/";
} else {var v$208 = v$213;
var v$209 = v$208[0];
var v$210 = v$208[1];
return SmlPrims.concat(basis$0List$1.rev$253(h$163(v$210,[v$209,["/",[v$212,null]]])));
};
} else {if (v$213 == null) {return v$212;
} else {var v$204 = v$213;
var v$205 = v$204[0];
switch (v$205) { case "": {throw basis$0Path$1.exn$Path$50;
 break; }default: {var v$206 = v$204[1];
return SmlPrims.concat([v$212,basis$0List$1.rev$253(h$163(v$206,[v$205,null]))]);
} };
};
};
} else {throw basis$0Path$1.exn$Path$50;
};
};
basis$0Path$1.concat$214 = function(v$254,v$255){if ((((v$255.length >= 1)?((basis$0String$1.sub$97(v$255,0)) == 47):false)?[true,"",basis$0String$1.extract$112(v$255,1,[1])]:[false,"",v$255])[0]) {throw basis$0Path$1.exn$Path$50;
} else {var v$244 = ((v$254.length >= 1)?((basis$0String$1.sub$97(v$254,0)) == 47):false)?[true,"",basis$0String$1.extract$112(v$254,1,[1])]:[false,"",v$254];
if (v$244[0]) {var v$251 = v$244[2];
switch (v$251) { case "": {return (v$244[1] + "/") + v$255;
 break; }default: {return (((v$244[1] + "/") + (((basis$0String$1.sub$97(v$251,SmlPrims.chk_ovf_i32(v$251.length - 1))) == 47)?(basis$0String$1.extract$112(v$251,0,[0,SmlPrims.chk_ovf_i32(v$251.length - 1)])):v$251)) + "/") + v$255;
} };
} else {switch (v$244[1]) { case "": {switch (v$244[2]) { case "": {return v$255;
 break; }default: {var v$875 = v$244[1];
var v$876 = v$244[2];
return ((v$875 + (((basis$0String$1.sub$97(v$876,SmlPrims.chk_ovf_i32(v$876.length - 1))) == 47)?(basis$0String$1.extract$112(v$876,0,[0,SmlPrims.chk_ovf_i32(v$876.length - 1)])):v$876)) + "/") + v$255;
} };
 break; }default: {var v$878 = v$244[1];
var v$879 = v$244[2];
return ((v$878 + (((basis$0String$1.sub$97(v$879,SmlPrims.chk_ovf_i32(v$879.length - 1))) == 47)?(basis$0String$1.extract$112(v$879,0,[0,SmlPrims.chk_ovf_i32(v$879.length - 1)])):v$879)) + "/") + v$255;
} };
};
};
};
basis$0Path$1.getParent$256 = function(p$259){var v$310 = basis$0Path$1.fromString$103(p$259);
var v$311 = v$310[1];
var v$312 = v$310[2];
var v$313 = v$310[0];
var v$299;
var t$909 = basis$0List$1.rev$253;
var t$908;
var v$719 = basis$0List$1.rev$253(v$313);
if (v$719 == null) {t$908 = ["..",null];
} else {var v$720 = v$719;
switch (v$720[0]) { case "": {var v$721 = v$720[1];
t$908 = ((v$721 == null)?(v$311?null:["..",null]):["..",v$721]);
 break; }case ".": {t$908 = ["..",v$720[1]];
 break; }case "..": {t$908 = ["..",["..",v$720[1]]];
 break; }default: {t$908 = v$720[1];
} };
};
v$299 = (t$909(t$908));
if (v$299 == null) {if (v$311) {return basis$0Path$1.toString$156(["",null],true,v$312);
} else {return ".";
};
} else {return basis$0Path$1.toString$156(v$299,v$311,v$312);
};
};
basis$0Path$1.mkCanonical$314 = function(p$317){var v$394 = basis$0Path$1.fromString$103(p$317);
var v$395 = v$394[1];
var v$396 = v$394[2];
var v$397 = v$394[0];
var t$924 = basis$0Path$1.toString$156;
var t$923;
var t$922 = basis$0List$1.rev$253;
var t$921;
var fix$910 = {};
fix$910.$h = function(v$726,v$727){lab$h: while (true) {if (v$726 == null) {return (v$727 == null)?(v$395?["",null]:[".",null]):v$727;
} else {var v$731 = v$726;
var v$732 = v$731[0];
switch (v$732) { case "": {var v$733 = v$731[1];
var t$917 = v$733;
var t$918 = v$727;
var v$726 = t$917;
var v$727 = t$918;
continue lab$h;
 break; }case ".": {var v$735 = v$731[1];
var t$915 = v$735;
var t$916 = v$727;
var v$726 = t$915;
var v$727 = t$916;
continue lab$h;
 break; }case "..": {var v$737 = v$731[1];
var t$912 = v$737;
var t$911;
if (v$727 == null) {t$911 = (v$395?null:["..",null]);
} else {var v$740 = v$727;
switch (v$740[0]) { case "..": {t$911 = ["..",["..",v$740[1]]];
 break; }default: {t$911 = v$740[1];
} };
};
var t$913 = t$912;
var t$914 = t$911;
var v$726 = t$913;
var v$727 = t$914;
continue lab$h;
 break; }default: {var v$741 = v$731[1];
var t$919 = v$741;
var t$920 = [v$732,v$727];
var v$726 = t$919;
var v$727 = t$920;
continue lab$h;
} };
};
};
};
var h$725 = fix$910.$h;
t$921 = (h$725(v$397,null));
t$923 = (t$922(t$921));
return t$924(t$923,v$395,v$396);
};
var fix$925 = {};
fix$925.$parentize = function(v$401){if (v$401 == null) {return null;
} else {var v$407 = v$401;
var v$408 = v$407[1];
return ["..",fix$925.$parentize(v$408)];
};
};
var parentize$398 = fix$925.$parentize;
basis$0Path$1.mkRelative$409 = function(v$479,v$480){var v$850 = basis$0Path$1.fromString$103(v$479);
var v$851 = basis$0Path$1.fromString$103(basis$0Path$1.mkCanonical$314(v$480));
if (v$851[1]) {if (v$850[1]) {var v$475 = v$850[2];
var v$476 = v$850[0];
var v$477 = v$851[2];
var v$478 = v$851[0];
var fix$926 = {};
fix$926.$h = function(v$431,v$434){lab$h: while (true) {if (v$431 == null) {if (v$434 == null) {return [".",null];
} else {return parentize$398(v$434);
};
} else {if (v$434 == null) {return v$431;
} else {var v$462 = v$431;
var v$463 = v$462[0];
var v$464 = v$462[1];
var v$465 = v$434;
var v$466 = v$465[0];
var v$467 = v$465[1];
if (v$463 == v$466) {var t$927 = v$464;
var t$928 = v$467;
var v$431 = t$927;
var v$434 = t$928;
continue lab$h;
} else {var t$935 = basis$0List$1.s$n$264;
var t$934 = parentize$398(v$434);
var t$933;
var t$929;
var v$861 = ["",null];
var fix$930 = {};
fix$930.$eq_list = function(v$898,v$899){lab$eq_list: while (true) {if (v$898 == null) {return (v$899 == null)?true:false;
} else {if (v$899 == null) {return false;
} else {var v$900 = v$898;
var v$901 = v$899;
if (v$900[0] == v$901[0]) {var t$931 = v$900[1];
var t$932 = v$901[1];
var v$898 = t$931;
var v$899 = t$932;
continue lab$eq_list;
} else {return false;
};
};
};
};
};
var eq_list$897 = fix$930.$eq_list;
t$929 = (eq_list$897(v$476,v$861));
t$933 = (t$929?null:v$431);
return t$935(t$934,t$933);
};
};
};
};
};
var h$428 = fix$926.$h;
if ((v$475 == v$477)?false:true) {throw basis$0Path$1.exn$Path$50;
} else {return basis$0Path$1.toString$156(h$428(v$476,v$478),false,"");
};
} else {return v$479;
};
} else {throw basis$0Path$1.exn$Path$50;
};
};
basis$0Path$1.mkAbsolute$481 = function(v$494,v$495){if ((((v$495.length >= 1)?((basis$0String$1.sub$97(v$495,0)) == 47):false)?[true,"",basis$0String$1.extract$112(v$495,1,[1])]:[false,"",v$495])[0]?false:true) {throw basis$0Path$1.exn$Path$50;
} else {if ((((v$494.length >= 1)?((basis$0String$1.sub$97(v$494,0)) == 47):false)?[true,"",basis$0String$1.extract$112(v$494,1,[1])]:[false,"",v$494])[0]) {return v$494;
} else {return basis$0Path$1.mkCanonical$314(basis$0Path$1.concat$214(v$495,v$494));
};
};
};
basis$0Path$1.isCanonical$496 = function(p$499){return (basis$0Path$1.mkCanonical$314(p$499)) == p$499;
};
basis$0Path$1.joinDirFile$500 = function(v$505,v$506){return basis$0Path$1.concat$214(v$505,v$506);
};
basis$0Path$1.splitDirFile$507 = function(p$510){var v$530 = basis$0Path$1.fromString$103(p$510);
var v$531 = v$530[1];
var v$532 = v$530[2];
var v$533 = v$530[0];
var v$520 = basis$0List$1.rev$253(v$533);
if (v$520 == null) {return [basis$0Path$1.toString$156(null,v$531,v$532),""];
} else {var v$527 = v$520;
var v$528 = v$527[0];
var v$529 = v$527[1];
return [basis$0Path$1.toString$156(basis$0List$1.rev$253(v$529),v$531,v$532),v$528];
};
};
basis$0Path$1.dir$534 = function(s$537){var t$936;
var v$775 = basis$0Path$1.fromString$103(s$537);
var v$776 = v$775[1];
var v$777 = v$775[2];
var v$778 = v$775[0];
var v$779 = basis$0List$1.rev$253(v$778);
if (v$779 == null) {t$936 = [basis$0Path$1.toString$156(null,v$776,v$777),""];
} else {var v$780 = v$779;
var v$781 = v$780[0];
var v$782 = v$780[1];
t$936 = [basis$0Path$1.toString$156(basis$0List$1.rev$253(v$782),v$776,v$777),v$781];
};
return t$936[0];
};
basis$0Path$1.file$542 = function(s$545){var t$937;
var v$784 = basis$0Path$1.fromString$103(s$545);
var v$785 = v$784[1];
var v$786 = v$784[2];
var v$787 = v$784[0];
var v$788 = basis$0List$1.rev$253(v$787);
if (v$788 == null) {t$937 = [basis$0Path$1.toString$156(null,v$785,v$786),""];
} else {var v$789 = v$788;
var v$790 = v$789[0];
var v$791 = v$789[1];
t$937 = [basis$0Path$1.toString$156(basis$0List$1.rev$253(v$791),v$785,v$786),v$790];
};
return t$937[1];
};
basis$0Path$1.joinBaseExt$550 = function(v$895,v$564){switch (v$564[0]) { case 1: {return v$895;
 break; }default: {var v$566 = v$564[1];
switch (v$566) { case "": {return v$895;
 break; }default: {return (v$895 + ".") + v$566;
} };
} };
};
basis$0Path$1.splitBaseExt$569 = function(s$572){var v$597;
var v$795 = basis$0Path$1.fromString$103(s$572);
var v$796 = v$795[1];
var v$797 = v$795[2];
var v$798 = v$795[0];
var v$799 = basis$0List$1.rev$253(v$798);
if (v$799 == null) {v$597 = [basis$0Path$1.toString$156(null,v$796,v$797),""];
} else {var v$800 = v$799;
var v$801 = v$800[0];
var v$802 = v$800[1];
v$597 = [basis$0Path$1.toString$156(basis$0List$1.rev$253(v$802),v$796,v$797),v$801];
};
var v$598 = v$597[0];
var v$599 = v$597[1];
var v$591 = basis$0Substring$1.splitr$829(function(c$596){return (c$596 == 46)?false:true;
},[v$599,0,v$599.length]);
var v$592 = v$591[0];
var v$593 = v$591[1];
if ((v$593[2] == 0)?true:((v$592[2] == 0)?true:(v$592[2] == 1))) {return [s$572,[1]];
} else {var t$938;
var v$873;
var v$896 = (basis$0Substring$1.trimr$237(1))(v$592);
v$873 = (basis$0Substring$1.string$113(v$896[0],v$896[1],v$896[2]));
t$938 = (basis$0Path$1.concat$214(v$598,v$873));
return [t$938,[0,basis$0Substring$1.string$113(v$593[0],v$593[1],v$593[2])]];
};
};
basis$0Path$1.ext$600 = function(s$603){return (basis$0Path$1.splitBaseExt$569(s$603))[1];
};
basis$0Path$1.base$608 = function(s$611){return (basis$0Path$1.splitBaseExt$569(s$611))[0];
};
basis$0Path$1.fromUnixPath$616 = function(p$619){return p$619;
};
basis$0Path$1.toUnixPath$620 = function(p$623){return p$623;
};
return 0;
})();
